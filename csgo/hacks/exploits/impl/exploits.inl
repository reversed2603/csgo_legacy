#pragma once
#include "../exploits.h"

namespace csgo::hacks { 
	__forceinline void c_exploits::limit_ticks( ) {
		m_max_process_ticks = game::g_cvar->find_var( "sv_maxusrcmdprocessticks" )->get_int( ); /* gather max processing ticks for recharge/main shift */

		m_ticks_to_charge = m_max_process_ticks;
		m_ticks_to_shift = m_max_process_ticks - 2; // lets base this on sv_maxusrcmdprocessticks
	}

	__forceinline void c_exploits::reset_shift( ) {
		m_recharge = false;
		m_can_lag = false;
		m_lag_during_shift = false;

		m_dt_bullets = 0;
		m_shift_amount = 0;
		m_shift_timer = 0;
		m_allowed_ticks = 0;
	}

	__forceinline bool c_exploits::is_charged( ) {
		return m_allowed_ticks >= m_ticks_to_charge && m_charged;
	}

	__forceinline bool c_exploits::dt_enabled( ) {
		return g_key_binds->get_keybind_state( &m_cfg->m_dt_key ) && is_charged( );
	}
}